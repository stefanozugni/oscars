<div class="nominations-container">
  <div *ngIf="getCategories().length > 0; else noData" class="nominations">
    <div *ngFor="let category of getCategories()" class="category"
      [ngClass]="{'best-picture': category === 'Best Picture'}">
      <h2>{{ category }}</h2>
      <div class="category-movies">
        <ng-container *ngFor="let nomination of groupedNominations[category]">

          <hr *ngIf="nomination.Winner?.trim()" class="winner-divider-top">

          <div *ngIf="category === 'Best Picture'; else otherCategories">
            <span *ngIf="nomination.FilmId">
              <a [href]="isImdb
                          ? 'https://letterboxd.com/imdb/' + nomination.FilmId + '/'
                          : 'https://www.imdb.com/title/' + nomination.FilmId" target="_blank"
                rel="noopener noreferrer" style="text-decoration: none; color: var(--body);">
                <span class="nomination" [ngClass]="{'winner-text': nomination.Winner?.trim()}">
                  <i>{{ nomination.Film }}</i>
                </span>
              </a>
            </span>
            <span *ngIf="!nomination.FilmId && nomination.Film" class="nomination"
              [ngClass]="{'winner-text': nomination.Winner?.trim()}">
              <i>{{ nomination.Film }}</i>
            </span>
          </div>

          <ng-template #otherCategories>
            <span class="nomination" [ngClass]="{'winner-text': nomination.Winner?.trim()}">
              <ng-container *ngFor="let nominee of getNomineesWithLinks(nomination); let last = last">
                <ng-container *ngIf="nominee.imdbId; else noLink">
                  <a [href]="'https://www.imdb.com/name/' + nominee.imdbId" target="_blank" rel="noopener noreferrer"
                    style="text-decoration: none; color: var(--body);">
                    {{ nominee.name }}
                  </a>
                </ng-container>
                <ng-template #noLink>{{ nominee.name }}</ng-template>
                <span *ngIf="!last">, </span>
              </ng-container>
            </span>

            <span *ngIf="nomination.Film">
              <ng-container *ngIf="nomination.FilmId; else filmNoLink">
                <a [href]="isImdb
                            ? 'https://letterboxd.com/imdb/' + nomination.FilmId + '/'
                            : 'https://www.imdb.com/title/' + nomination.FilmId" target="_blank"
                  rel="noopener noreferrer" style="text-decoration:none;" class="nomination-movie">
                  <i>{{ nomination.Film }}</i>
                </a>
              </ng-container>
              <ng-template #filmNoLink>
                <span class="nomination-movie"><i>{{ nomination.Film }}</i></span>
              </ng-template>
            </span>
          </ng-template>

          <span *ngIf="nomination.Winner?.trim()" class="winner">üèÜ</span>

          <hr *ngIf="nomination.Winner?.trim()" class="winner-divider-bottom">
        </ng-container>
      </div>
    </div>
  </div>

  <ng-template #noData>
    <p>Nessun dato disponibile per l'anno {{ year }}.</p>
  </ng-template>
</div>